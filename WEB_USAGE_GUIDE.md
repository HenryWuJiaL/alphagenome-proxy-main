# AlphaGenome WebåŠŸèƒ½ä½¿ç”¨æŒ‡å—

## å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨APIæœåŠ¡
python3 start_services.py

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨WebæœåŠ¡å™¨
python3 -m http.server 8080
```

### 2. è®¿é—®Webç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:8080/web_interface.html

## Webç•Œé¢åŠŸèƒ½

### ä¸»ç•Œé¢ (web_interface.html)

#### åŠŸèƒ½ç‰¹æ€§
- ğŸ§¬ **å˜ä½“é¢„æµ‹**: é¢„æµ‹åŸºå› å˜ä½“çš„å½±å“
- ğŸ“Š **å˜ä½“è¯„åˆ†**: å¯¹å˜ä½“è¿›è¡Œè¯„åˆ†
- ğŸ¯ **åŒºé—´é¢„æµ‹**: é¢„æµ‹åŸºå› ç»„åŒºé—´çš„åŠŸèƒ½
- ğŸ“ˆ **åŒºé—´è¯„åˆ†**: å¯¹åŒºé—´è¿›è¡Œè¯„åˆ†
- ğŸ”‘ **API Keyç®¡ç†**: å®‰å…¨çš„APIå¯†é’¥é…ç½®
- ğŸ” **è¿æ¥æµ‹è¯•**: æµ‹è¯•ä¸APIæœåŠ¡çš„è¿æ¥

#### ä½¿ç”¨æ­¥éª¤

1. **é…ç½®API Key**
   - åœ¨"API Key é…ç½®"åŒºåŸŸè¾“å…¥ä½ çš„AlphaGenome API Key
   - ç‚¹å‡»"ä¿å­˜ API Key"æŒ‰é’®

2. **é€‰æ‹©é¢„æµ‹æ–¹æ³•**
   - ä»ä¸‹æ‹‰èœå•é€‰æ‹©é¢„æµ‹æ–¹æ³•:
     - `predict_variant`: é¢„æµ‹å˜ä½“
     - `score_variant`: è¯„åˆ†å˜ä½“
     - `predict_interval`: é¢„æµ‹åŒºé—´
     - `score_interval`: è¯„åˆ†åŒºé—´

3. **è¾“å…¥å‚æ•°**
   - **æŸ“è‰²ä½“**: ä¾‹å¦‚ `chr22`
   - **èµ·å§‹ä½ç½®**: ä¾‹å¦‚ `35677410`
   - **ç»“æŸä½ç½®**: ä¾‹å¦‚ `36725986`
   - **å˜ä½“ä½ç½®**: ä¾‹å¦‚ `36201698`
   - **å‚è€ƒç¢±åŸº**: ä¾‹å¦‚ `A`
   - **æ›¿ä»£ç¢±åŸº**: ä¾‹å¦‚ `C`
   - **è¾“å‡ºç±»å‹**: é€‰æ‹©RNA_SEQã€ATACã€DNASEæˆ–CAGE

4. **æ‰§è¡Œé¢„æµ‹**
   - ç‚¹å‡»"ğŸš€ è°ƒç”¨ AlphaGenome é¢„æµ‹"æŒ‰é’®
   - ç­‰å¾…é¢„æµ‹ç»“æœï¼ˆå¯èƒ½éœ€è¦30-40ç§’ï¼‰

5. **æŸ¥çœ‹ç»“æœ**
   - é¢„æµ‹ç»“æœä¼šæ˜¾ç¤ºåœ¨é¡µé¢åº•éƒ¨
   - åŒ…å«é¢„æµ‹æ•°æ®å’Œå¯è§†åŒ–å›¾åƒ

### å…¶ä»–ç•Œé¢

#### è‹±æ–‡ç•Œé¢ (web_interface_english.html)
- åŠŸèƒ½ä¸ä¸»ç•Œé¢ç›¸åŒï¼Œä½†ä½¿ç”¨è‹±æ–‡ç•Œé¢
- é€‚åˆå›½é™…ç”¨æˆ·ä½¿ç”¨

#### gRPCç•Œé¢ (web_interface_grpc.html)
- ä¸“é—¨ç”¨äºgRPCåè®®æµ‹è¯•
- åŒ…å«gRPCç‰¹å®šçš„åŠŸèƒ½

#### æµ‹è¯•å›¾åƒç•Œé¢ (test_image.html)
- ç”¨äºæµ‹è¯•å›¾åƒç”ŸæˆåŠŸèƒ½
- éªŒè¯å¯è§†åŒ–ç»„ä»¶

## APIä½¿ç”¨

### åŸºç¡€ç«¯ç‚¹

#### å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8000/health
```

#### æ ¹ç«¯ç‚¹
```bash
curl http://localhost:8000/
```

### é¢„æµ‹ç«¯ç‚¹

#### å˜ä½“é¢„æµ‹
```bash
curl -X POST http://localhost:8000/predict_variant \
  -H "Content-Type: application/json" \
  -d '{
    "interval": {
      "chromosome": "chr22",
      "start": 35677410,
      "end": 36725986
    },
    "variant": {
      "chromosome": "chr22",
      "position": 36201698,
      "reference_bases": "A",
      "alternate_bases": "C"
    },
    "organism": 9606,
    "requested_outputs": [4],
    "model_version": "v1"
  }'
```

#### å˜ä½“è¯„åˆ†
```bash
curl -X POST http://localhost:8000/score_variant \
  -H "Content-Type: application/json" \
  -d '{
    "interval": {
      "chromosome": "chr22",
      "start": 35677410,
      "end": 36725986
    },
    "variant": {
      "chromosome": "chr22",
      "position": 36201698,
      "reference_bases": "A",
      "alternate_bases": "C"
    },
    "organism": 9606,
    "requested_outputs": [4],
    "model_version": "v1"
  }'
```

#### åŒºé—´é¢„æµ‹
```bash
curl -X POST http://localhost:8000/predict_interval \
  -H "Content-Type: application/json" \
  -d '{
    "interval": {
      "chromosome": "chr22",
      "start": 35677410,
      "end": 36725986
    },
    "organism": 9606,
    "requested_outputs": [4],
    "model_version": "v1"
  }'
```

### è¾“å‡ºç±»å‹

| ä»£ç  | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| 1 | ATAC | æŸ“è‰²è´¨å¯åŠæ€§ |
| 2 | CAGE | åŸºå› è¡¨è¾¾ |
| 3 | DNASE | DNAé…¶æ•æ„Ÿæ€§ |
| 4 | RNA_SEQ | RNAæµ‹åº |

## å‚æ•°è¯´æ˜

### å¿…éœ€å‚æ•°

- **interval**: åŸºå› ç»„åŒºé—´
  - `chromosome`: æŸ“è‰²ä½“åç§° (å¦‚ "chr22")
  - `start`: èµ·å§‹ä½ç½®
  - `end`: ç»“æŸä½ç½®

- **variant**: åŸºå› å˜ä½“ (ä»…å˜ä½“ç›¸å…³ç«¯ç‚¹)
  - `chromosome`: æŸ“è‰²ä½“åç§°
  - `position`: å˜ä½“ä½ç½®
  - `reference_bases`: å‚è€ƒç¢±åŸº
  - `alternate_bases`: æ›¿ä»£ç¢±åŸº

- **organism**: ç”Ÿç‰©ä½“ID (9606 = äººç±»)
- **requested_outputs**: è¾“å‡ºç±»å‹åˆ—è¡¨
- **model_version**: æ¨¡å‹ç‰ˆæœ¬ ("v1")

### å¯é€‰å‚æ•°

- **API Key**: ç”¨äºè®¤è¯çš„APIå¯†é’¥

## å“åº”æ ¼å¼

### æˆåŠŸå“åº”
```json
{
  "status": "success",
  "message": "Real AlphaGenome prediction successful",
  "data_type": "<class 'alphagenome.models.dna_output.VariantOutput'>",
  "plot_image": "base64_encoded_image_data",
  "reference_output": {
    "output_type": 4,
    "variant_effect": "predicted",
    "prediction_confidence": 0.95,
    "model_version": "v1",
    "interval": {...},
    "variant": {...},
    "organism": 9606,
    "ontology_terms": [],
    "requested_outputs": [4]
  }
}
```

### é”™è¯¯å“åº”
```json
{
  "detail": "é”™è¯¯æè¿°"
}
```

## æ€§èƒ½æ³¨æ„äº‹é¡¹

### å“åº”æ—¶é—´
- å…¸å‹å“åº”æ—¶é—´: 30-40ç§’
- å»ºè®®åœ¨webç•Œé¢æ·»åŠ åŠ è½½æç¤º
- è€ƒè™‘ä½¿ç”¨å¼‚æ­¥å¤„ç†

### å¹¶å‘é™åˆ¶
- å½“å‰ç‰ˆæœ¬å¹¶å‘å¤„ç†èƒ½åŠ›æœ‰é™
- å»ºè®®å•ç”¨æˆ·ä½¿ç”¨æˆ–é™åˆ¶å¹¶å‘è¯·æ±‚æ•°

### èµ„æºä½¿ç”¨
- æ¨¡å‹åŠ è½½éœ€è¦è¾ƒå¤šå†…å­˜
- å»ºè®®åœ¨æ€§èƒ½è¾ƒå¥½çš„æœºå™¨ä¸Šè¿è¡Œ

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡æ— æ³•å¯åŠ¨**
   - æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
   - ç¡®è®¤Pythonç¯å¢ƒå’Œä¾èµ–å·²æ­£ç¡®å®‰è£…

2. **APIè¯·æ±‚å¤±è´¥**
   - æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œ
   - éªŒè¯è¯·æ±‚æ ¼å¼æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤API Keyæ˜¯å¦æœ‰æ•ˆ

3. **å“åº”æ—¶é—´è¿‡é•¿**
   - è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œæ¨¡å‹éœ€è¦æ—¶é—´å¤„ç†
   - è€ƒè™‘ä¼˜åŒ–è¯·æ±‚å‚æ•°

4. **Webç•Œé¢æ— æ³•è®¿é—®**
   - ç¡®è®¤HTTPæœåŠ¡å™¨å·²å¯åŠ¨
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹æœåŠ¡æ—¥å¿—**
   ```bash
   # æŸ¥çœ‹APIæœåŠ¡æ—¥å¿—
   tail -f logs/api.log
   ```

2. **æµ‹è¯•è¿æ¥**
   ```bash
   # æµ‹è¯•å¥åº·æ£€æŸ¥
   curl http://localhost:8000/health
   ```

3. **æ£€æŸ¥ç«¯å£**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   lsof -i :8000
   lsof -i :8080
   ```

## é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰å‚æ•°
- å¯ä»¥ä¿®æ”¹è¯·æ±‚å‚æ•°ä»¥é€‚åº”ä¸åŒçš„åˆ†æéœ€æ±‚
- æ”¯æŒå¤šç§æŸ“è‰²ä½“å’ŒåŸºå› ç»„ä½ç½®

### æ‰¹é‡å¤„ç†
- å¯ä»¥ç¼–å†™è„šæœ¬è¿›è¡Œæ‰¹é‡é¢„æµ‹
- å»ºè®®æ·»åŠ é€‚å½“çš„å»¶è¿Ÿä»¥é¿å…è¿‡è½½

### ç»“æœåˆ†æ
- é¢„æµ‹ç»“æœåŒ…å«è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯
- å¯ä»¥è¿›ä¸€æ­¥åˆ†æé¢„æµ‹çš„å¯ä¿¡åº¦

## è”ç³»æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥æœåŠ¡æ—¥å¿—
3. ç¡®è®¤ç¯å¢ƒé…ç½®æ­£ç¡®
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---

*æœ€åæ›´æ–°: 2025å¹´8æœˆ20æ—¥*
